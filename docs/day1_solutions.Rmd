---
title: '<span class="en">Day 1: Solutions</span><span class="de">Tag 1: Lösungen</span>'
subtitle: '<span class="en">Your First Accumulation Curve!</span><span class="de">Deine erste Akkumulationskurve!</span>'
author: '<span class="en">Answer Key</span><span class="de">Lösungsschlüssel</span>'
date: "`r Sys.Date()`"
output:
  html_document:
    toc: true
    toc_float: true
    theme: flatly
    self_contained: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, eval = TRUE, message = FALSE, warning = FALSE)
```

```{=html}
<style>
body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.7; background-color: #fafffe; }
h1 { color: #2E7D32 !important; border-bottom: 3px solid #4CAF50; padding-bottom: 10px; }
h2 { color: #388E3C !important; margin-top: 2em; }
h3 { color: #43A047 !important; }
pre { background-color: #f5f5f5 !important; border-left: 4px solid #4CAF50 !important; padding: 15px; border-radius: 8px; }
code { background-color: #E8F5E9; padding: 2px 6px; border-radius: 4px; color: #2E7D32; }
pre code { background-color: transparent; padding: 0; }
blockquote { border-left: 4px solid #FF9800; background-color: #FFF8E1; padding: 15px 20px; margin: 1em 0; border-radius: 0 8px 8px 0; }
hr { border: none; height: 3px; background: linear-gradient(to right, #4CAF50, #81C784, #C8E6C9, #81C784, #4CAF50); margin: 2em 0; }
.tocify { border: none !important; border-radius: 12px !important; background-color: #f1f8e9 !important; }
.tocify-item.active { background-color: #4CAF50 !important; color: white !important; }

.lang-toggle { position: fixed; top: 10px; right: 20px; z-index: 9999; background: linear-gradient(135deg, #2E7D32, #4CAF50); padding: 8px 12px; border-radius: 25px; }
.lang-toggle button { background: transparent; border: none; color: #fff; padding: 6px 14px; cursor: pointer; font-weight: bold; border-radius: 20px; font-size: 14px; }
.lang-toggle button.active { background: white; color: #2E7D32; }
.de { display: none; } .en { display: inline; }
body.lang-de .de { display: inline; } body.lang-de .en { display: none; }
div.de, p.de, li.de, h1.de, h2.de, h3.de, section.de { display: none; }
div.en, p.en, li.en, h1.en, h2.en, h3.en, section.en { display: block; }
body.lang-de div.de, body.lang-de p.de, body.lang-de li.de, body.lang-de h1.de, body.lang-de h2.de, body.lang-de h3.de, body.lang-de section.de { display: block; }
body.lang-de div.en, body.lang-de p.en, body.lang-de li.en, body.lang-de h1.en, body.lang-de h2.en, body.lang-de h3.en, body.lang-de section.en { display: none; }
body.lang-de #TOC .en { display: none; } body.lang-de #TOC .de { display: inline; }
#TOC .de { display: none; } #TOC .en { display: inline; }

@media (max-width: 768px) {
  body { font-size: 14px; }
  pre { font-size: 11px; padding: 10px; }
}
</style>
```

```{=html}
<script>
$(document).ready(function() {
  var toggle = $('<div class="lang-toggle"><button id="btn-en" class="active">EN</button><button id="btn-de">DE</button></div>');
  $('body').append(toggle);
  var savedLang = localStorage.getItem('workshop-lang');
  var defaultLang = savedLang || (navigator.language.substring(0, 2) === 'de' ? 'de' : 'en');
  function setLanguage(lang) {
    $('body').removeClass('lang-en lang-de').addClass('lang-' + lang);
    $('#btn-en').toggleClass('active', lang === 'en');
    $('#btn-de').toggleClass('active', lang === 'de');
    localStorage.setItem('workshop-lang', lang);
  }
  if (defaultLang === 'de') setLanguage('de');
  $('#btn-en').click(function() { setLanguage('en'); });
  $('#btn-de').click(function() { setLanguage('de'); });
});
</script>
```

---

# <span class="en">Exercise 1: Your First Variables</span><span class="de">Übung 1: Deine ersten Variablen</span>

### <span class="en">1a: Creating simple variables</span><span class="de">1a: Einfache Variablen erstellen</span>

```{r}
# Store the number 42
answer <- 42
print(answer)

# Store your age
my_age <- 14
print(my_age)

# Store a decimal number (height in meters)
my_height <- 1.65
print(my_height)
```

### <span class="en">1b: Text variables</span><span class="de">1b: Text-Variablen</span>

```{r}
# Store your name
my_name <- "Liam"
print(my_name)

# Store a species name
species <- "Oak"
print(species)
```

### <span class="en">1c: Logical variables</span><span class="de">1c: Logische Variablen</span>

```{r}
# Is it raining?
is_raining <- FALSE

# Is 5 greater than 3?
five_greater_three <- 5 > 3
print(five_greater_three)

# Is 10 equal to 10?
ten_equals_ten <- 10 == 10
print(ten_equals_ten)

# Is "oak" equal to "Oak"?
oak_equals_Oak <- "oak" == "Oak"
print(oak_equals_Oak)  # FALSE - R is case-sensitive!
```

### <span class="en">1d: Basic math</span><span class="de">1d: Grundrechenarten</span>

```{r}
a <- 10
b <- 3

# Addition
sum_ab <- a + b
print(sum_ab)  # 13

# Subtraction
diff_ab <- a - b
print(diff_ab)  # 7

# Multiplication
prod_ab <- a * b
print(prod_ab)  # 30

# Division
div_ab <- a / b
print(div_ab)  # 3.333...

# Power
power_ab <- a ^ b
print(power_ab)  # 1000
```

### <span class="en">1e: Updating variables</span><span class="de">1e: Variablen aktualisieren</span>

```{r}
species_count <- 0
print(species_count)

species_count <- species_count + 5
print(species_count)  # 5

species_count <- species_count + 3
print(species_count)  # 8

species_count <- species_count - 2
print(species_count)  # 6
```

---

# <span class="en">Exercise 2: Vectors - Lists of Values</span><span class="de">Übung 2: Vektoren - Listen von Werten</span>

### <span class="en">2a: Creating vectors</span><span class="de">2a: Vektoren erstellen</span>

```{r}
species_counts <- c(5, 3, 7, 2, 4)
print(species_counts)

tree_heights <- c(15, 22, 18, 25)
print(tree_heights)

tree_species <- c("Oak", "Beech", "Pine", "Maple")
print(tree_species)
```

### <span class="en">2b: Vector functions</span><span class="de">2b: Vektor-Funktionen</span>

```{r}
length(species_counts)
sum(species_counts)
mean(species_counts)
mean(tree_heights)
min(species_counts)
max(species_counts)
```

### <span class="en">2c: Combining vectors</span><span class="de">2c: Vektoren kombinieren</span>

```{r}
plot1 <- c("Oak", "Beech", "Pine")
plot2 <- c("Beech", "Maple", "Oak")
plot3 <- c("Birch", "Oak", "Ash")

all_species <- c(plot1, plot2, plot3)
print(all_species)
length(all_species)
```

---

# <span class="en">Exercise 3: The Magic of unique()</span><span class="de">Übung 3: Die Magie von unique()</span>

```{r}
# 3a: Observations with repeats
observations <- c("Oak", "Beech", "Oak", "Pine", "Beech", "Oak", "Maple")
length(observations)

# 3b: Unique species
unique(observations)
length(unique(observations))

# 3c: Using plots
plot1 <- c("Oak", "Beech", "Pine")
plot2 <- c("Beech", "Maple", "Oak")
plot3 <- c("Birch", "Oak", "Ash")

all_species <- c(plot1, plot2, plot3)
length(all_species)           # 9
length(unique(all_species))   # 6

# 3d: After plot1 + plot2
after_two_plots <- c(plot1, plot2)
length(unique(after_two_plots))  # 4
```

---

# <span class="en">Exercise 4: Data Frames</span><span class="de">Übung 4: Data Frames</span>

```{r}
# 4a: Create a simple data frame
my_data <- data.frame(
  species = c("Oak", "Beech", "Pine", "Maple"),
  height = c(20, 18, 25, 15),
  native = c(TRUE, TRUE, TRUE, FALSE)
)

my_data

# 4b: How many rows and columns?
nrow(my_data)
ncol(my_data)

# 4c: Access a column with $
my_data$species
my_data$height

# 4d: Get the mean height
mean(my_data$height)

# 4e: Access a specific row (row 2)
my_data[2, ]

# 4f: Access a specific cell (row 2, column "height")
my_data[2, "height"]
```

---

# <span class="en">Exercise 5: Loading Real Data</span><span class="de">Übung 5: Echte Daten laden</span>

```{r}
library(tidyverse)

species_data <- read_csv("../data/austria_species.csv")

head(species_data)

nrow(species_data)

colnames(species_data)

length(unique(species_data$PlotObservationID))

length(unique(species_data$WFO_TAXON))
```

---

# <span class="en">Exercise 6: Filtering Data</span><span class="de">Übung 6: Daten filtern</span>

```{r}
# 6a: Look at the STATUS column
unique(species_data$STATUS)

# 6b: Filter for native species only
native_only <- species_data %>%
  filter(STATUS == "nat")

nrow(native_only)

# 6c: Filter for alien/invasive species
alien_only <- species_data %>%
  filter(STATUS == "neo")

nrow(alien_only)

# 6d: How many unique native species?
length(unique(native_only$WFO_TAXON))

# 6e: How many unique alien species?
length(unique(alien_only$WFO_TAXON))

# 6f: Filter for a specific plot
first_plot <- unique(species_data$PlotObservationID)[1]
first_plot

one_plot <- species_data %>%
  filter(PlotObservationID == first_plot)

# How many species in this one plot?
length(unique(one_plot$WFO_TAXON))
```

---

# <span class="en">Exercise 7: Building the Accumulation Curve</span><span class="de">Übung 7: Die Akkumulationskurve bauen</span>

```{r}
# Get all unique plots
all_plots <- unique(species_data$PlotObservationID)

# Take first 50 for speed
sample_plots <- all_plots[1:50]

# Initialize
species_found <- c()
accumulation <- c()

# Loop through each plot
for (i in 1:length(sample_plots)) {
  current_plot <- sample_plots[i]
  plot_species <- species_data$WFO_TAXON[species_data$PlotObservationID == current_plot]
  species_found <- c(species_found, plot_species)
  total_species <- length(unique(species_found))
  accumulation <- c(accumulation, total_species)
}

# Result
accumulation
```

---

# <span class="en">Exercise 8: Plot Your Curve!</span><span class="de">Übung 8: Zeichne deine Kurve!</span>

```{r}
# Create data frame
curve_data <- data.frame(
  plots = 1:length(accumulation),
  species = accumulation
)

head(curve_data)

# Basic plot
ggplot(curve_data, aes(x = plots, y = species)) +
  geom_line(color = "#2E7D32", linewidth = 2) +
  geom_point(color = "#2E7D32", size = 2) +
  labs(
    title = "My First Species Accumulation Curve!",
    x = "Number of Plots Sampled",
    y = "Cumulative Species Count"
  ) +
  theme_minimal(base_size = 14)

# Pretty version with filled area
ggplot(curve_data, aes(x = plots, y = species)) +
  geom_area(fill = "#C8E6C9", alpha = 0.5) +
  geom_line(color = "#2E7D32", linewidth = 2) +
  labs(
    title = "Species Accumulation Curve - Austria",
    subtitle = paste("Total species found:", max(accumulation)),
    x = "Plots Sampled",
    y = "Cumulative Species"
  ) +
  theme_minimal(base_size = 14)
```

---

# <span class="en">Bonus: Compare Native vs Alien!</span><span class="de">Bonus: Vergleiche Heimisch vs Alien!</span>

```{r}
# Filter for native species only
native_species <- species_data %>%
  filter(STATUS == "nat")

length(unique(native_species$WFO_TAXON))

# Filter for alien species
alien_species <- species_data %>%
  filter(STATUS == "neo")

length(unique(alien_species$WFO_TAXON))
```

---

<div class="en">

**Key concepts learned:**

- Variables store data with `<-`
- `c()` creates vectors
- `unique()` counts different values
- Data frames organize data in rows and columns
- `filter()` selects specific rows
- Loops repeat actions for each plot
- `ggplot()` creates visualizations

</div>

<div class="de">

**Gelernte Schlüsselkonzepte:**

- Variablen speichern Daten mit `<-`
- `c()` erstellt Vektoren
- `unique()` zählt verschiedene Werte
- Data Frames organisieren Daten in Zeilen und Spalten
- `filter()` wählt bestimmte Zeilen aus
- Schleifen wiederholen Aktionen für jeden Plot
- `ggplot()` erstellt Visualisierungen

</div>
