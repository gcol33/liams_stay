---
title: '<span class="en">Species Accumulation Curves - Day 2</span><span class="de">Artenakkumulationskurven - Tag 2</span>'
subtitle: '<span class="en">Research Project: Native vs. Alien Species</span><span class="de">Forschungsprojekt: Heimische vs. Alien-Arten</span>'
author: '<span class="en">Ecology Workshop</span><span class="de">Ökologie-Workshop</span>'
date: "`r Sys.Date()`"
output:
  html_document:
    toc: true
    toc_float: true
    theme: flatly
    self_contained: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, message = FALSE, warning = FALSE, fig.width = 9, fig.height = 5)
library(tidyverse)
library(knitr)
```

```{css, echo=FALSE}
/* ========== WORKSHOP THEME ========== */

body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  line-height: 1.7;
  background-color: #fafffe;
}

h1 { color: #2E7D32 !important; border-bottom: 3px solid #4CAF50; padding-bottom: 10px; }
h2 { color: #388E3C !important; margin-top: 2em; }
h3 { color: #43A047 !important; }

table { border-collapse: collapse; margin: 1em 0; width: 100%; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
th { background-color: #4CAF50 !important; color: white !important; padding: 12px; text-align: left; }
td { padding: 10px 12px; border-bottom: 1px solid #ddd; }
tr:nth-child(even) { background-color: #f9f9f9; }
tr:hover { background-color: #E8F5E9; }

pre { background-color: #f5f5f5 !important; border-left: 4px solid #4CAF50 !important; padding: 15px; border-radius: 8px; }
code { background-color: #E8F5E9; padding: 2px 6px; border-radius: 4px; color: #2E7D32; }

blockquote { border-left: 4px solid #FF9800; background-color: #FFF8E1; padding: 15px 20px; margin: 1em 0; border-radius: 0 8px 8px 0; }

hr { border: none; height: 3px; background: linear-gradient(to right, #4CAF50, #81C784, #C8E6C9, #81C784, #4CAF50); margin: 2em 0; border-radius: 2px; }

.tocify { border: none !important; border-radius: 12px !important; background-color: #f1f8e9 !important; }
.tocify-item.active { background-color: #4CAF50 !important; color: white !important; }

/* Exercise boxes */
.exercise-box {
  background: linear-gradient(135deg, #E3F2FD 0%, #BBDEFB 100%);
  border-left: 5px solid #1976D2;
  padding: 20px;
  margin: 1.5em 0;
  border-radius: 0 12px 12px 0;
}

.exercise-box h4 { color: #1565C0 !important; margin-top: 0; }

/* Hypothesis boxes */
.hypothesis-box {
  background: linear-gradient(135deg, #FFF3E0 0%, #FFE0B2 100%);
  border-left: 5px solid #FF9800;
  padding: 20px;
  margin: 1.5em 0;
  border-radius: 0 12px 12px 0;
}

/* Results boxes */
.results-box {
  background: linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 100%);
  border-left: 5px solid #4CAF50;
  padding: 20px;
  margin: 1.5em 0;
  border-radius: 0 12px 12px 0;
}

/* ========== LANGUAGE TOGGLE ========== */
.lang-toggle {
  position: fixed; top: 10px; right: 20px; z-index: 9999;
  background: linear-gradient(135deg, #2E7D32, #4CAF50);
  padding: 8px 12px; border-radius: 25px;
  box-shadow: 0 4px 15px rgba(46, 125, 50, 0.3);
}
.lang-toggle button {
  background: transparent; border: none; color: #fff;
  padding: 6px 14px; cursor: pointer; font-weight: bold;
  border-radius: 20px; transition: all 0.3s; font-size: 14px;
}
.lang-toggle button.active { background: white; color: #2E7D32; }
.lang-toggle button:hover:not(.active) { background: rgba(255,255,255,0.2); }

.de { display: none; }
.en { display: inline; }
body.lang-de .de { display: inline; }
body.lang-de .en { display: none; }

div.de, p.de, li.de, h1.de, h2.de, h3.de, h4.de, section.de { display: none; }
div.en, p.en, li.en, h1.en, h2.en, h3.en, h4.en, section.en { display: block; }

body.lang-de div.de, body.lang-de p.de, body.lang-de li.de,
body.lang-de h1.de, body.lang-de h2.de, body.lang-de h3.de,
body.lang-de h4.de, body.lang-de section.de { display: block; }

body.lang-de div.en, body.lang-de p.en, body.lang-de li.en,
body.lang-de h1.en, body.lang-de h2.en, body.lang-de h3.en,
body.lang-de h4.en, body.lang-de section.en { display: none; }

body.lang-de #TOC .en { display: none; }
body.lang-de #TOC .de { display: inline; }
#TOC .de { display: none; }
#TOC .en { display: inline; }

@media print {
  .tocify, .lang-toggle { display: none; }
}
```

```{js, echo=FALSE}
document.addEventListener('DOMContentLoaded', function() {
  var toggle = document.createElement('div');
  toggle.className = 'lang-toggle';
  toggle.innerHTML = '<button id="btn-en" class="active">EN</button><button id="btn-de">DE</button>';
  document.body.appendChild(toggle);

  var savedLang = localStorage.getItem('workshop-lang');
  var browserLang = navigator.language.substring(0, 2);
  var defaultLang = savedLang || (browserLang === 'de' ? 'de' : 'en');
  if (defaultLang === 'de') setLanguage('de');

  document.getElementById('btn-en').addEventListener('click', function() { setLanguage('en'); });
  document.getElementById('btn-de').addEventListener('click', function() { setLanguage('de'); });

  function setLanguage(lang) {
    document.body.classList.remove('lang-en', 'lang-de');
    document.body.classList.add('lang-' + lang);
    document.getElementById('btn-en').classList.toggle('active', lang === 'en');
    document.getElementById('btn-de').classList.toggle('active', lang === 'de');
    localStorage.setItem('workshop-lang', lang);
  }
});
```

---

# <span class="en">Part 1: Review & Research Question</span><span class="de">Teil 1: Wiederholung & Forschungsfrage</span>

## <span class="en">Quick Review from Day 1</span><span class="de">Kurze Wiederholung von Tag 1</span>

<div class="en">

Yesterday we learned:

- **Biodiversity** = variety of species in an area
- **Accumulation curves** show how species discovery slows with sampling effort
- **Asymptote** = estimated total species (what we're approaching)
- Austrian data has **native** (natural) and **alien** (introduced) species

</div>

<div class="de">

Gestern haben wir gelernt:

- **Biodiversität** = Artenvielfalt in einem Gebiet
- **Akkumulationskurven** zeigen, wie die Artenentdeckung mit dem Stichprobenaufwand abnimmt
- **Asymptote** = geschätzte Gesamtartenzahl (was wir anstreben)
- Österreichische Daten haben **heimische** (natürliche) und **Alien**- (eingeführte) Arten

</div>

```{r review-curve, echo=FALSE, fig.height=3.5}
set.seed(42)
n <- 50
curve_data <- data.frame(
  plots = 1:n,
  species = cumsum(c(15, pmax(0, round(rnorm(n-1, 3, 2) * (1 - (1:49)/60)))))
)

ggplot(curve_data, aes(x = plots, y = species)) +
  geom_line(color = "#2E7D32", linewidth = 2) +
  labs(title = "Review: Species Accumulation Curve",
       x = "Plots Sampled", y = "Cumulative Species") +
  theme_minimal(base_size = 14)
```

---

## <span class="en">Today's Research Question</span><span class="de">Heutige Forschungsfrage</span>

<div class="hypothesis-box">

<div class="en">

**Do alien species accumulate differently than native species?**

**Hypotheses:**

- **H1:** Alien species accumulate **more slowly** (fewer species overall)
- **H2:** Alien species are **more evenly distributed** across space
- **H3:** The curves will have **different shapes**

</div>

<div class="de">

**Akkumulieren Alien-Arten anders als heimische Arten?**

**Hypothesen:**

- **H1:** Alien-Arten akkumulieren **langsamer** (weniger Arten insgesamt)
- **H2:** Alien-Arten sind **gleichmäßiger verteilt** im Raum
- **H3:** Die Kurven werden **unterschiedliche Formen** haben

</div>

</div>

---

## <span class="en">R Exercise: Load and Prepare Data</span><span class="de">R-Übung: Daten laden und vorbereiten</span>

<div class="exercise-box">

```{r load-all-data}
# Load both datasets
species <- read.csv("../data/austria_species.csv")
plots <- read.csv("../data/austria_header.csv")

# Merge species data with plot locations
data <- merge(species, plots, by = "PlotObservationID")

# Check the result
head(data)
nrow(data)
```

```{r check-coordinates}
# Do we have coordinates?
summary(data$Longitude)
summary(data$Latitude)
```

</div>

---

# <span class="en">Part 2: The Spatial Algorithm</span><span class="de">Teil 2: Der räumliche Algorithmus</span>

## <span class="en">Why Does Order Matter?</span><span class="de">Warum ist die Reihenfolge wichtig?</span>

<div class="en">

Yesterday we built curves by sampling plots in **random order**.

But in real ecology, we often care about **spatial patterns**:

- Do species cluster geographically?
- How does diversity change as we move across a landscape?

**Solution:** Sample plots in **spatial order** - always go to the nearest unvisited plot!

</div>

<div class="de">

Gestern haben wir Kurven erstellt, indem wir Plots in **zufälliger Reihenfolge** untersucht haben.

Aber in der realen Ökologie interessieren uns oft **räumliche Muster**:

- Sind Arten geografisch geclustert?
- Wie verändert sich die Diversität über eine Landschaft?

**Lösung:** Plots in **räumlicher Reihenfolge** untersuchen - immer zum nächsten unbesuchten Plot gehen!

</div>

```{r spatial-concept, echo=FALSE, fig.height=4}
set.seed(123)
n_pts <- 15
pts <- data.frame(
  x = runif(n_pts, 0, 10),
  y = runif(n_pts, 0, 10),
  order = NA
)

# Nearest neighbor order starting from point 1
current <- 1
pts$order[1] <- 1
visited <- 1

for(i in 2:n_pts) {
  unvisited <- setdiff(1:n_pts, visited)
  distances <- sqrt((pts$x[unvisited] - pts$x[current])^2 +
                   (pts$y[unvisited] - pts$y[current])^2)
  nearest <- unvisited[which.min(distances)]
  pts$order[nearest] <- i
  visited <- c(visited, nearest)
  current <- nearest
}

pts_ordered <- pts[order(pts$order), ]

ggplot(pts, aes(x = x, y = y)) +
  geom_path(data = pts_ordered, color = "#1976D2", linewidth = 1, alpha = 0.5) +
  geom_point(size = 5, color = "#2E7D32") +
  geom_text(aes(label = order), color = "white", size = 3, fontface = "bold") +
  labs(title = "Nearest-Neighbor Sampling Order",
       subtitle = "Numbers show visit order: always go to nearest unvisited plot",
       x = "Longitude", y = "Latitude") +
  theme_minimal(base_size = 14)
```

---

## <span class="en">The Nearest-Neighbor Algorithm</span><span class="de">Der Nearest-Neighbor-Algorithmus</span>

<div class="en">

**Step by step:**

1. Pick a **starting plot** (seed)
2. Mark it as **visited**
3. Find the **nearest unvisited** plot
4. Move there, record new species, mark as visited
5. **Repeat** until all plots are visited

</div>

<div class="de">

**Schritt für Schritt:**

1. Wähle einen **Startplot** (Seed)
2. Markiere ihn als **besucht**
3. Finde den **nächsten unbesuchten** Plot
4. Gehe dorthin, notiere neue Arten, markiere als besucht
5. **Wiederhole** bis alle Plots besucht sind

</div>

---

## <span class="en">R Exercise: Calculating Distance</span><span class="de">R-Übung: Entfernung berechnen</span>

<div class="exercise-box">

<div class="en">

#### The Distance Formula

Distance between two points (x1, y1) and (x2, y2):

$$d = \sqrt{(x_2 - x_1)^2 + (y_2 - y_1)^2}$$

</div>

<div class="de">

#### Die Entfernungsformel

Entfernung zwischen zwei Punkten (x1, y1) und (x2, y2):

$$d = \sqrt{(x_2 - x_1)^2 + (y_2 - y_1)^2}$$

</div>

```{r distance-function}
# Function to calculate distance between two points
calc_distance <- function(x1, y1, x2, y2) {
  sqrt((x2 - x1)^2 + (y2 - y1)^2)
}

# Test it: distance from (0,0) to (3,4) should be 5
calc_distance(0, 0, 3, 4)
```

```{r distance-example}
# Example with real coordinates (in degrees)
# Vienna: 48.2082 N, 16.3738 E
# Graz: 47.0707 N, 15.4395 E

vienna <- c(lon = 16.3738, lat = 48.2082)
graz <- c(lon = 15.4395, lat = 47.0707)

dist_degrees <- calc_distance(vienna["lon"], vienna["lat"],
                              graz["lon"], graz["lat"])
cat("Distance in degrees:", round(dist_degrees, 2), "\n")
cat("Approximate km:", round(dist_degrees * 111, 0), "km\n")  # ~111 km per degree
```

</div>

---

## <span class="en">R Exercise: For Loops</span><span class="de">R-Übung: For-Schleifen</span>

<div class="exercise-box">

<div class="en">

#### Repeating Actions with Loops

A `for` loop repeats code for each element:

</div>

<div class="de">

#### Aktionen mit Schleifen wiederholen

Eine `for`-Schleife wiederholt Code für jedes Element:

</div>

```{r for-loop-basic}
# Print numbers 1 to 5
for (i in 1:5) {
  print(i)
}
```

```{r for-loop-accumulate}
# Build a cumulative sum manually
values <- c(10, 5, 3, 2, 1)
total <- 0
cumulative <- c()

for (i in 1:length(values)) {
  total <- total + values[i]
  cumulative <- c(cumulative, total)
  cat("After step", i, ": total =", total, "\n")
}

cumulative
```

<div class="en">

**Key concept:** We'll use loops to visit plots one by one and track species!

</div>

<div class="de">

**Schlüsselkonzept:** Wir werden Schleifen verwenden, um Plots nacheinander zu besuchen und Arten zu verfolgen!

</div>

</div>

---

# <span class="en">Part 3: Building Spatial Accumulation Curves</span><span class="de">Teil 3: Räumliche Akkumulationskurven bauen</span>

## <span class="en">The Complete Algorithm</span><span class="de">Der vollständige Algorithmus</span>

<div class="exercise-box">

```{r build-curve-function}
# Function to build a spatial accumulation curve
build_spatial_curve <- function(data, start_plot) {

  # Get unique plots with their coordinates
  plot_info <- unique(data[, c("PlotObservationID", "Longitude", "Latitude")])
  n_plots <- nrow(plot_info)

  # Initialize
  visited <- c(start_plot)
  current <- start_plot
  species_seen <- unique(data$WFO_TAXON[data$PlotObservationID == start_plot])

  # Results storage
  results <- data.frame(
    step = 1,
    plot_id = start_plot,
    new_species = length(species_seen),
    cumulative = length(species_seen)
  )

  # Visit all other plots in nearest-neighbor order
  for (step in 2:n_plots) {
    # Get current position
    current_pos <- plot_info[plot_info$PlotObservationID == current, ]

    # Find unvisited plots
    unvisited <- plot_info[!plot_info$PlotObservationID %in% visited, ]

    if (nrow(unvisited) == 0) break

    # Calculate distances to all unvisited plots
    distances <- calc_distance(
      current_pos$Longitude, current_pos$Latitude,
      unvisited$Longitude, unvisited$Latitude
    )

    # Go to nearest
    nearest_idx <- which.min(distances)
    next_plot <- unvisited$PlotObservationID[nearest_idx]

    # Count new species
    species_here <- unique(data$WFO_TAXON[data$PlotObservationID == next_plot])
    new_species <- setdiff(species_here, species_seen)
    species_seen <- union(species_seen, species_here)

    # Record results
    results <- rbind(results, data.frame(
      step = step,
      plot_id = next_plot,
      new_species = length(new_species),
      cumulative = length(species_seen)
    ))

    # Update position
    visited <- c(visited, next_plot)
    current <- next_plot
  }

  return(results)
}
```

</div>

---

## <span class="en">R Exercise: Build Your First Spatial Curve</span><span class="de">R-Übung: Deine erste räumliche Kurve bauen</span>

<div class="exercise-box">

```{r first-spatial-curve}
# Use a subset of data for speed
set.seed(42)
sample_plots <- sample(unique(data$PlotObservationID), 100)
data_sample <- data[data$PlotObservationID %in% sample_plots, ]

# Pick a starting plot
start <- sample_plots[1]

# Build the curve
curve1 <- build_spatial_curve(data_sample, start)

head(curve1)
tail(curve1)
```

```{r plot-first-curve, fig.height=4}
ggplot(curve1, aes(x = step, y = cumulative)) +
  geom_line(color = "#2E7D32", linewidth = 1.5) +
  geom_point(color = "#2E7D32", size = 1, alpha = 0.5) +
  labs(title = "Spatial Accumulation Curve (100 plots)",
       x = "Plots Visited (spatial order)",
       y = "Cumulative Species") +
  theme_minimal(base_size = 14)
```

</div>

---

# <span class="en">Part 4: Multiple Starting Points</span><span class="de">Teil 4: Mehrere Startpunkte</span>

## <span class="en">Why Multiple Seeds?</span><span class="de">Warum mehrere Seeds?</span>

<div class="en">

The shape of the curve depends on **where we start**!

- Starting in a species-rich area: fast initial accumulation
- Starting in a species-poor area: slow initial accumulation

**Solution:** Run the algorithm multiple times with different starting points, then average.

</div>

<div class="de">

Die Form der Kurve hängt davon ab, **wo wir starten**!

- Start in artenreichem Gebiet: schnelle anfängliche Akkumulation
- Start in artenarmem Gebiet: langsame anfängliche Akkumulation

**Lösung:** Den Algorithmus mehrmals mit verschiedenen Startpunkten ausführen, dann mitteln.

</div>

---

## <span class="en">R Exercise: Multiple Seeds</span><span class="de">R-Übung: Mehrere Seeds</span>

<div class="exercise-box">

```{r multiple-seeds}
# Run with 5 different starting points
n_seeds <- 5
all_curves <- list()

set.seed(123)
start_plots <- sample(sample_plots, n_seeds)

for (i in 1:n_seeds) {
  curve <- build_spatial_curve(data_sample, start_plots[i])
  curve$seed <- i
  all_curves[[i]] <- curve
}

# Combine all curves
all_curves_df <- do.call(rbind, all_curves)
```

```{r plot-multiple-seeds, fig.height=4}
ggplot(all_curves_df, aes(x = step, y = cumulative, color = factor(seed))) +
  geom_line(linewidth = 1, alpha = 0.7) +
  scale_color_brewer(palette = "Set1", name = "Seed") +
  labs(title = "Effect of Starting Point on Accumulation Curve",
       subtitle = "5 different starting locations",
       x = "Plots Visited",
       y = "Cumulative Species") +
  theme_minimal(base_size = 14)
```

```{r average-curve, fig.height=4}
# Calculate mean and confidence interval
summary_curve <- all_curves_df %>%
  group_by(step) %>%
  summarize(
    mean_species = mean(cumulative),
    sd_species = sd(cumulative),
    lower = mean_species - 1.96 * sd_species / sqrt(n()),
    upper = mean_species + 1.96 * sd_species / sqrt(n()),
    .groups = "drop"
  )

ggplot(summary_curve, aes(x = step, y = mean_species)) +
  geom_ribbon(aes(ymin = lower, ymax = upper), fill = "#4CAF50", alpha = 0.3) +
  geom_line(color = "#2E7D32", linewidth = 1.5) +
  labs(title = "Average Accumulation Curve with 95% CI",
       x = "Plots Visited",
       y = "Cumulative Species") +
  theme_minimal(base_size = 14)
```

</div>

---

# <span class="en">Part 5: Native vs. Alien Comparison</span><span class="de">Teil 5: Vergleich Heimisch vs. Alien</span>

## <span class="en">Separate the Data</span><span class="de">Daten trennen</span>

<div class="exercise-box">

```{r separate-native-alien}
# Split data by status
native_data <- data_sample[data_sample$STATUS == "native", ]
alien_data <- data_sample[data_sample$STATUS == "alien", ]

cat("Native observations:", nrow(native_data), "\n")
cat("Alien observations:", nrow(alien_data), "\n")
cat("Native species:", length(unique(native_data$WFO_TAXON)), "\n")
cat("Alien species:", length(unique(alien_data$WFO_TAXON)), "\n")
```

</div>

---

## <span class="en">Build Curves for Both Groups</span><span class="de">Kurven für beide Gruppen bauen</span>

<div class="exercise-box">

```{r build-native-alien-curves}
# Function to build multiple curves and return summary
build_curves_summary <- function(data, n_seeds = 5) {
  sample_plots <- unique(data$PlotObservationID)

  if (length(sample_plots) < 10) {
    return(NULL)  # Not enough plots
  }

  all_curves <- list()
  set.seed(42)
  start_plots <- sample(sample_plots, min(n_seeds, length(sample_plots)))

  for (i in seq_along(start_plots)) {
    curve <- build_spatial_curve(data, start_plots[i])
    curve$seed <- i
    all_curves[[i]] <- curve
  }

  all_df <- do.call(rbind, all_curves)

  # Summarize
  summary_df <- all_df %>%
    group_by(step) %>%
    summarize(
      mean_species = mean(cumulative),
      sd_species = sd(cumulative),
      .groups = "drop"
    )

  return(summary_df)
}

# Build curves for native species
native_summary <- build_curves_summary(native_data, n_seeds = 5)
native_summary$status <- "Native"

# Build curves for alien species
alien_summary <- build_curves_summary(alien_data, n_seeds = 5)
alien_summary$status <- "Alien"

# Combine
comparison <- rbind(native_summary, alien_summary)
```

```{r plot-comparison, fig.height=5}
ggplot(comparison, aes(x = step, y = mean_species, color = status, fill = status)) +
  geom_ribbon(aes(ymin = mean_species - sd_species,
                  ymax = mean_species + sd_species),
              alpha = 0.2, color = NA) +
  geom_line(linewidth = 1.5) +
  scale_color_manual(values = c("Alien" = "#FF9800", "Native" = "#4CAF50")) +
  scale_fill_manual(values = c("Alien" = "#FF9800", "Native" = "#4CAF50")) +
  labs(title = "Species Accumulation: Native vs. Alien",
       subtitle = "Shaded area shows standard deviation across seeds",
       x = "Plots Visited (spatial order)",
       y = "Cumulative Species",
       color = "Status", fill = "Status") +
  theme_minimal(base_size = 14) +
  theme(legend.position = "top")
```

</div>

---

## <span class="en">Normalize for Fair Comparison</span><span class="de">Normalisieren für fairen Vergleich</span>

<div class="en">

The raw curves are hard to compare because there are many more native species.

**Solution:** Normalize to percentage of total species found.

</div>

<div class="de">

Die Rohkurven sind schwer zu vergleichen, weil es viel mehr heimische Arten gibt.

**Lösung:** Auf Prozent der gefundenen Gesamtarten normalisieren.

</div>

<div class="exercise-box">

```{r normalize-curves, fig.height=5}
# Normalize each curve to percentage
comparison_norm <- comparison %>%
  group_by(status) %>%
  mutate(
    max_species = max(mean_species),
    pct_complete = (mean_species / max_species) * 100
  )

ggplot(comparison_norm, aes(x = step, y = pct_complete, color = status)) +
  geom_line(linewidth = 1.5) +
  scale_color_manual(values = c("Alien" = "#FF9800", "Native" = "#4CAF50")) +
  labs(title = "Normalized Accumulation: Native vs. Alien",
       subtitle = "Both curves scaled to percentage of total species found",
       x = "Plots Visited",
       y = "% of Total Species Found",
       color = "Status") +
  theme_minimal(base_size = 14) +
  theme(legend.position = "top")
```

</div>

---

# <span class="en">Part 6: Interpretation & Discussion</span><span class="de">Teil 6: Interpretation & Diskussion</span>

## <span class="en">What Do the Curves Tell Us?</span><span class="de">Was sagen uns die Kurven?</span>

<div class="results-box">

<div class="en">

**Observations from the comparison:**

1. **Total richness:** Native species >> Alien species (as expected)

2. **Curve shape:**
   - Steeper initial rise = species are clustered
   - Gradual rise = species are evenly spread

3. **Implications for invasions:**
   - If aliens accumulate more evenly, they may be better dispersers
   - Clustered natives may be limited by historical factors

</div>

<div class="de">

**Beobachtungen aus dem Vergleich:**

1. **Gesamtartenreichtum:** Heimische Arten >> Alien-Arten (wie erwartet)

2. **Kurvenform:**
   - Steilerer anfänglicher Anstieg = Arten sind geclustert
   - Gradueller Anstieg = Arten sind gleichmäßig verteilt

3. **Implikationen für Invasionen:**
   - Wenn Aliens gleichmäßiger akkumulieren, sind sie vielleicht bessere Ausbreiter
   - Geclusterte Einheimische könnten durch historische Faktoren begrenzt sein

</div>

</div>

---

## <span class="en">Discussion Questions</span><span class="de">Diskussionsfragen</span>

<div class="en">

1. **Why might alien species be more evenly distributed?**
   - Human-mediated dispersal (trade, transport)
   - Generalist habitat preferences
   - Recent introduction = no time to cluster

2. **What are the limitations of our analysis?**
   - Sample size (we only used 100 plots)
   - Geographic bias in sampling
   - Detection probability differs by species

3. **What would you do differently with more time?**
   - Use all 52,000 Austrian plots
   - Compare different habitat types
   - Look at temporal changes

</div>

<div class="de">

1. **Warum könnten Alien-Arten gleichmäßiger verteilt sein?**
   - Vom Menschen vermittelte Ausbreitung (Handel, Transport)
   - Generalistische Habitatpräferenzen
   - Kürzliche Einführung = keine Zeit zum Clustern

2. **Was sind die Einschränkungen unserer Analyse?**
   - Stichprobengröße (wir haben nur 100 Plots verwendet)
   - Geografische Verzerrung in der Beprobung
   - Nachweiswahrscheinlichkeit unterscheidet sich zwischen Arten

3. **Was würdest du mit mehr Zeit anders machen?**
   - Alle 52.000 österreichischen Plots verwenden
   - Verschiedene Habitattypen vergleichen
   - Zeitliche Veränderungen betrachten

</div>

---

## <span class="en">Biological Mechanisms</span><span class="de">Biologische Mechanismen</span>

<div class="en">

**Why do accumulation patterns differ?**

| Factor | Effect on Curve Shape |
|--------|----------------------|
| **Dispersal ability** | Good dispersers = even distribution = gradual curve |
| **Habitat specificity** | Specialists = clustered = steep then flat |
| **Historical range** | Long history = natural clustering patterns |
| **Human influence** | Transport along roads, rivers = linear patterns |

</div>

<div class="de">

**Warum unterscheiden sich Akkumulationsmuster?**

| Faktor | Effekt auf Kurvenform |
|--------|----------------------|
| **Ausbreitungsfähigkeit** | Gute Ausbreiter = gleichmäßige Verteilung = graduelle Kurve |
| **Habitatspezifität** | Spezialisten = geclustert = steil dann flach |
| **Historische Verbreitung** | Lange Geschichte = natürliche Clustermuster |
| **Menschlicher Einfluss** | Transport entlang Straßen, Flüssen = lineare Muster |

</div>

---

# <span class="en">Summary: Day 2</span><span class="de">Zusammenfassung: Tag 2</span>

## <span class="en">Key Concepts</span><span class="de">Schlüsselkonzepte</span>

<div class="en">

| Concept | What we learned |
|---------|-----------------|
| **Spatial order** | The sequence we visit plots affects the curve shape |
| **Nearest-neighbor** | Algorithm: always go to closest unvisited plot |
| **Multiple seeds** | Different starting points = different curves = need to average |
| **Native vs. Alien** | Different accumulation patterns reveal ecological differences |

</div>

<div class="de">

| Konzept | Was wir gelernt haben |
|---------|----------------------|
| **Räumliche Reihenfolge** | Die Reihenfolge, in der wir Plots besuchen, beeinflusst die Kurvenform |
| **Nearest-Neighbor** | Algorithmus: immer zum nächsten unbesuchten Plot gehen |
| **Mehrere Seeds** | Verschiedene Startpunkte = verschiedene Kurven = Mittelung nötig |
| **Heimisch vs. Alien** | Unterschiedliche Akkumulationsmuster zeigen ökologische Unterschiede |

</div>

---

## <span class="en">R Functions Learned Today</span><span class="de">Heute gelernte R-Funktionen</span>

```{r functions-day2, echo=FALSE}
functions <- data.frame(
  Function = c("sqrt()", "for loop", "merge()", "setdiff()", "union()",
               "do.call(rbind, ...)", "group_by() + summarize()"),
  Purpose_EN = c("Square root (for distance)", "Repeat code for each element",
                 "Combine two data frames", "Find elements in A but not B",
                 "Combine unique elements", "Combine list of data frames",
                 "Calculate summaries by group"),
  Purpose_DE = c("Quadratwurzel (für Entfernung)", "Code für jedes Element wiederholen",
                 "Zwei Dataframes kombinieren", "Elemente in A aber nicht in B finden",
                 "Eindeutige Elemente kombinieren", "Liste von Dataframes kombinieren",
                 "Zusammenfassungen nach Gruppe berechnen")
)
kable(functions)
```

---

## <span class="en">Main Findings</span><span class="de">Hauptergebnisse</span>

<div class="results-box">

<div class="en">

1. **Native species are much more diverse** in Austria than alien species (~6:1 ratio)

2. **Spatial patterns differ** between native and alien species

3. **The starting point matters** - we need multiple seeds to get reliable curves

4. **Normalized curves** allow fair comparison between groups of different sizes

</div>

<div class="de">

1. **Heimische Arten sind viel diverser** in Österreich als Alien-Arten (~6:1 Verhältnis)

2. **Räumliche Muster unterscheiden sich** zwischen heimischen und Alien-Arten

3. **Der Startpunkt ist wichtig** - wir brauchen mehrere Seeds für zuverlässige Kurven

4. **Normalisierte Kurven** ermöglichen fairen Vergleich zwischen unterschiedlich großen Gruppen

</div>

</div>

---

## <span class="en">Take-Home Message</span><span class="de">Fazit</span>

<div class="en">

> Species accumulation curves are a powerful tool for understanding biodiversity patterns. By comparing native and alien species, we can gain insights into invasion ecology and conservation priorities.

**What's next?**

- Apply these methods to other regions or taxa
- Investigate temporal changes in accumulation patterns
- Use curves to guide conservation planning

</div>

<div class="de">

> Artenakkumulationskurven sind ein mächtiges Werkzeug zum Verständnis von Biodiversitätsmustern. Durch den Vergleich von heimischen und Alien-Arten können wir Einblicke in Invasionsökologie und Naturschutzprioritäten gewinnen.

**Wie geht es weiter?**

- Diese Methoden auf andere Regionen oder Taxa anwenden
- Zeitliche Veränderungen in Akkumulationsmustern untersuchen
- Kurven zur Naturschutzplanung nutzen

</div>

---

<div class="en">

**Thank you! Questions?**

</div>

<div class="de">

**Vielen Dank! Fragen?**

</div>
